plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '0.7.3'
}


group 'cn.gudqs7.idea.plugins'
version '1.2.9'

repositories {
    mavenCentral()
}
dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.6.0'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'
    compile group: 'org.yaml', name: 'snakeyaml', version: '1.25'
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
intellij {
//    version '2020.3.2'
    version 'IU-211.7442.40'
    updateSinceUntilBuild false
    plugins 'java'
}
patchPluginXml {
    changeNotes """<pre>
    Release v1.2.9
        1. add hiddenRequest/hiddenResponse on method comment, you can config it to hidden field by xxx.xxx(not include param field name)
        2. bug fix
    Release v1.2.8
        1. bug fix
    Release v1.2.7
        1. new feature: export to postman
        2. bug fix
    Release v1.2.6
        1. add code memo support
            you can add multi code memo from comment: (@code 200 success); 
            or from swagger annotation: @ApiResponse(code = 200, message = "success")
        2. bug fix for base type: java.lang.Number
    Release v1.2.5
        1. bug fix
        2. change position of batch generate menu
    Release v1.2.3
        1. bug fix
        2. add hidden support on batch generate
    Release v1.2.2
        1. add progress modal when batch generate
        2. use package name classify api doc files by make directory
        3. bug fix
    Release v1.2.1
        1. add batch generate api doc files on project view popup menu
    Release v1.2.0
        1. add lan ip; usage: set env DOCER_SAVIOR_HOST=http://{LOCALHOST}:8080/, and {LOCALHOST} will be replaced by lan ip
    Release v1.1.9
        1. bug fixs
        2. more support for generic
        3. remove dialog
    Release v1.1.8
        1. bug fixs
        2. add @return support
        3. return param doc remove required
    Release v1.1.7
        1. bug fixs
    Release v1.1.6
        1. request param example add array/list support
        2. request param example fix bug: field prefix not right
    Release v1.1.5
        1. add comment support
        2. add restful support
    Release v1.1.3
        1. add more support annotation
        2. fix extends, get fields from fatherClass
    Release v1.1.2
        1. add more idea version
    Release v1.0.0
        1. bug fixs
    </pre>"""
}
test {
    useJUnitPlatform()
}

publishPlugin {
    channels = ''
    token = System.getenv("GUDQS7_IDEA_PLUGIN_TOKEN")
}

tasks.withType(JavaCompile) {
    options.encoding = "UTF-8"
}